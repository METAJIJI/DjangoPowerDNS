{% extends "base.html" %}

{% block content %}
    <h1><i class="fa fa-globe" aria-hidden="true"></i> {{ domain.name }}</h1>
    <hr>

    <button class="btn btn-primary button addNewButton" data-bind="click: $root.addRecord, enable: !$root.isAnyItemEditing()"><i class="fa fa-plus" aria-hidden="true"></i> Add Record</button>
    {% if domain_access.permission == 10 %}
        <a class="btn btn-warning" href="{% url 'domain-users' domain.id %}"><i class="fa fa-users" aria-hidden="true"></i> Users</a>
    {% endif %}
    <hr>

    <table class="table table-hover table-sm">
        <thead>
        <tr>
            <th style="width:5%;">#</th>
            <th style="width:15%;">Name</th>
            <th style="width:10%;" class="text-center">Type</th>
            <th style="width:40%;">Content</th>
            <th style="width:5%;">Prio</th>
            <th style="width:10%;" class="text-center">TTL</th>
            <th style="width:15%;"></th>
        </tr>
        <tbody data-bind="visible: $root.loading_records()">
        <tr>
            <td colspan="7" class="text-center">
                <i class="fa fa-spinner fa-spin fa-fw fa-5x"></i>
            </td>
        </tr>
        </tbody>
        <tbody data-bind="foreach: records, visible: !$root.loading_records()" style="display: none;">
        <tr>
            <th style="vertical-align: middle;" scope="row" data-bind="text: id"></th>
            <td style="vertical-align: middle;">
                <input style="display: none;" type="text" class="form-control form-control-sm" data-bind="value: name.editValue, visible: $root.isItemEditing($data)">
                <a class="read" data-bind="text: name, visible: !$root.isItemEditing($data)"></a>
            </td>
            <td style="vertical-align: middle;" class="text-center">
                <select style="display: none;" class="form-control form-control-sm edit"
                        data-bind="options: $root.availableRecords, value: type.editValue, visible: $root.isItemEditing($data)"></select>
                <a class="read" data-bind="text: type, visible: !$root.isItemEditing($data)"></a>
            </td>
            <td style="vertical-align: middle;">
                <input id="content" style="display: none;" type="text" class="form-control form-control-sm" data-bind="value: content.editValue, visible: $root.isItemEditing($data)">
                <a style="font-size: .875rem;" class="read" data-bind="text: content, visible: !$root.isItemEditing($data)"></a>
            </td>
            <td style="vertical-align: middle;" class="text-center">
                <input style="display: none;" type="text" class="form-control form-control-sm" data-bind="value: prio.editValue, visible: $root.isItemEditing($data)">
                <a class="read" data-bind="text: prio, visible: !$root.isItemEditing($data)"></a>
            </td>
            <td style="vertical-align: middle;" class="text-center">
                <input style="display: none;" type="text" class="form-control form-control-sm" data-bind="value: ttl.editValue, visible: $root.isItemEditing($data)">
                <a class="read" data-bind="text: ttl, visible: !$root.isItemEditing($data)"></a>
            </td>
            <td class="tools text-center">
                <button class="btn btn-outline-primary btn-sm button toolButton"
                        data-bind="click: $root.editRecord.bind($root), visible: !$root.isItemEditing($data), enable: !$root.isAnyItemEditing()">Edit
                </button>
                <button class="btn btn-outline-danger btn-sm button toolButton"
                        data-bind="click: $root.removeRecord.bind($root), visible: !$root.isItemEditing($data), enable: !$root.isAnyItemEditing()">Remove <i data-bind="visible: deleting"
                                                                                                                                                             class="fa fa-cog fa-spin fa-fw"></i>
                </button>
                <button class="btn btn-outline-success btn-sm button toolButton" data-bind="click: $root.applyRecord.bind($root), visible: $root.isItemEditing($data), enable: !saving() ">Apply <i
                        data-bind="visible: saving" class="fa fa-cog fa-spin fa-fw"></i></button>
                <button class="btn btn-outline-secondary btn-sm button toolButton" data-bind="click: $root.cancelEdit.bind($root), visible: $root.isItemEditing($data), enable: !saving()">Cancel
                </button>
            </td>
        </tr>
        </tbody>
    </table>
{% endblock %}